{
  "AWSEBDockerrunVersion": 2,
  "containerDefinitions": [
    {
      "name": "api-container",
      "image": "eli256/jdr-generator-api:latest",
      "essential": true,
      "memory": 512,
      "portMappings": [
        {
          "hostPort": 8081,
          "containerPort": 8080
        }
      ],
      "environment": [
        {
          "Name": "SPRING_DATASOURCE_URL",
          "Value": "jdbc:mysql://mysql-container:3306/jdr_generator_db?verifyServerCertificate=false&autoReconnect=true&useSSL=true&requireSSL=false&serverTimezone=Europe/Amsterdam"
        },
        {
          "Name": "SPRING_DATASOURCE_USERNAME",
          "Value": "root"
        },
        {
          "Name": "SPRING_DATASOURCE_PASSWORD",
          "Value": "root"
        },
        {
          "Name": "SPRING_JPA_HIBERNATE_DDL_AUTO",
          "Value": "none"
        }
      ],
      "links": [
        "mysql-container"
      ]
    },
    {
      "name": "web-container",
      "image": "eli256/jdr-generator-web:latest",
      "essential": true,
      "memory": 256,
      "portMappings": [
        {
          "hostPort": 80,
          "containerPort": 80
        }
      ],
      "links": [
        "api-container"
      ]
    },
    {
      "name": "gemini-container",
      "image": "eli256/jdr-generator-gemini:latest",
      "essential": true,
      "memory": 256,
      "portMappings": [
        {
          "hostPort": 8082,
          "containerPort": 3000
        }
      ],
      "environment": [
        {
          "Name": "PORT",
          "Value": "3000"
        }
      ]
    },
    {
      "name": "mysql-container",
      "image": "mysql:5.7",
      "essential": true,
      "memory": 512,
      "environment": [
        {
          "Name": "MYSQL_ROOT_PASSWORD",
          "Value": "root"
        },
        {
          "Name": "MYSQL_DATABASE",
          "Value": "jdr_generator_db"
        }
      ],
      "portMappings": [
        {
          "hostPort": 3306,
          "containerPort": 3306
        }
      ],
      "mountPoints": [
        {
          "SourceVolume": "mysql-data",
          "ContainerPath": "/var/lib/mysql"
        }
      ]
    }
  ],
  "Volumes": [
    {
      "Name": "mysql-data",
      "Host": {
        "SourcePath": "/var/lib/mysql"
      }
    }
  ]
}